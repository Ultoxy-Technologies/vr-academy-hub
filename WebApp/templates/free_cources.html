{% extends "website_base.html" %}
{% load static %}
{% block content %}

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Add 'active' class to the About Us link
    document.getElementById("cource-level").classList.add("active");
    document.getElementById("Free-Cources-link").classList.add("active");
  });
</script>

   <!-- Page Title -->
    <div class="page-title accent-background">
      <div class="container">
        <h1>Free Cources</h1>
        <nav class="breadcrumbs">
          <ol> 
            <li><a href="{% url 'index' %}">Home</a></li>
            <li class="current">Free Cources</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->


    <style>
  /* styles.css */
:root{
  --card-radius: 12px;
  --accent: #ff7a2d; /* orange used for 'Free' */
  --muted: #6c757d;
  --card-shadow: 0 6px 18px rgba(18, 38, 63, 0.06);
  --dotted-color: rgba(0,0,0,0.08);
}

* { box-sizing: border-box; }
body {
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: #121826;
  background: #f7f9fb;
}

/* Card */
.event-card {
  border: 1px solid rgba(0,0,0,0.04);
  box-shadow: var(--card-shadow);
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease;
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* image area with consistent aspect */
.card-media {
  overflow: hidden;
  border-bottom: 1px solid rgba(0,0,0,0.04);
  background: #f1f5f9;
}

.card-media img {
  display: block;
  width: 100%;
  height: 180px;
  object-fit: cover;
}

/* smaller screens get slightly smaller image */
@media (min-width: 992px) {
  .card-media img { height: 200px; }
}

/* Hover */
.event-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 14px 36px rgba(18,38,63,0.12);
}

/* Dotted separator like in design */
.dotted {
  border-top: 1px dashed var(--dotted-color);
  margin: 0;
}

/* Titles and meta */
.card-title {
  font-size: 1.05rem;
  line-height: 1.25;
  font-weight: 700;
  color: #07112a;
  margin-bottom: 0.5rem;
}

/* category/rating */
.category { letter-spacing: 0.2px; color: var(--muted); }

.stars i { font-size: 0.95rem; }

/* Price and button */
.price .free {
  color: var(--accent);
  font-weight: 700;
  font-size: 1rem;
}

.price .original { margin-top: 2px; }

/* Button style */
.register-btn {
  min-width: 120px;
  padding: 10px 14px;
  border-radius: 8px;
}

/* small-screen card spacing fix */
@media (max-width: 575.98px) {
  .card-media img { height: 150px; }
}
</style>


{% load static i18n %}

<main class="py-5 bg-light">
  <div class="container">

    <div class="row g-4">
       
          {% for course in courses %}
          <div class="col-12 col-md-6 col-lg-4">
            <article class="event-card h-100 bg-white rounded-3 shadow-sm">
              <div class="card-media">
                {% if course.thumbnail %}
                  <img src="{{ course.thumbnail.url }}" alt="{{ course.title }}" class="img-fluid w-100" loading="lazy">
                {% else %}
                  <img src="{% static 'website/img/cource-thumbnail.png' %}" alt="Default thumbnail" class="img-fluid w-100" loading="lazy">
                {% endif %}
              </div>

              <div class="card-body p-4">
                <div class="meta mb-2">
                  <div class="d-flex align-items-center">
                    <div class="me-3 text-muted small">
                      <i class="bi bi-calendar3 me-1"></i> {{ course.created_at|date:"M d, Y" }}
                    </div>
                    <!-- <div class="text-muted small ms-auto">
                      <i class="bi bi-clock me-1"></i> {{ course.time }}
                    </div> -->
                    
                  <div class="text-muted small mt-1">
                    <i class="bi bi-hourglass-split me-1"></i> Duration: {{ course.duration }}
                  </div>  
                  </div>
                </div>

                <hr class="my-3 dotted">

                <!-- <div class="rating d-flex align-items-center mb-2">
                  <div class="stars me-2 text-warning">
                    {% for i in "12345"|slice:":5" %}
                      {% if forloop.counter <= course.rating|floatformat:0 %}
                        <i class="bi bi-star-fill"></i>
                      {% else %}
                        <i class="bi bi-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  <div class="small text-muted">{{ course.rating }} ({{ course.total_reviews }})</div>
                </div> -->

                <h5 class="card-title mb-3">{{ course.title }}</h5>
                <div>
                  <span class="category">{{ course.description }}</span>
                </div>
                <div class="d-flex align-items-center justify-content-between mt-3">
                  <div class="price">
                    <div class="free text-orange fw-semibold">{{ course.offer_price }}</div>
                    {% if course.original_price %}
                      <div class="original text-muted small"><s>{{ course.original_price }}</s></div>
                    {% endif %}
                  </div>
                        <div style="text-align: left; position: relative; left: -50px; color: var(--accent); font-weight: 700; font-size: 1rem;">
                          <span><b>Free</b></span>
                          <span><b>Paid</b></span>
                        </div>
                        <a href="{% url 'register_user' %}" class="btn btn-dark register-btn" data-title="{{ course.title }}">
                          Register Now
                        </a>
                </div>
              </div>
            </article>
          </div>
          {% empty %}
            <p class="text-center text-muted">No courses available.</p>
          {% endfor %}



    </div> <!-- row -->
  </div> <!-- container -->
</main>

  <!-- Bootstrap JS (for components if needed) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // script.js
document.addEventListener('DOMContentLoaded', function () {
  const buttons = document.querySelectorAll('.register-btn');
  buttons.forEach(btn => {
    btn.addEventListener('click', (e) => {
      const title = btn.dataset.title || 'Event';
      // Simple feedback - in real app you would open a modal or navigate
      // Use a non-blocking UI-friendly approach:
      showToast(`${title} â€” Registration flow opened.`);
    });
  });

  // Very small toast implementation (no external dependency)
  function showToast(message, timeout = 2500) {
    const t = document.createElement('div');
    t.className = 'simple-toast';
    t.textContent = message;
    Object.assign(t.style, {
      position: 'fixed',
      right: '20px',
      bottom: '20px',
      background: '#0b1220',
      color: '#fff',
      padding: '10px 14px',
      borderRadius: '8px',
      boxShadow: '0 8px 24px rgba(2,8,23,0.3)',
      zIndex: 1080,
      fontSize: '0.95rem',
      opacity: '0',
      transform: 'translateY(10px)',
      transition: 'opacity .18s, transform .18s'
    });
    document.body.appendChild(t);
    // force reflow
    void t.offsetWidth;
    t.style.opacity = '1';
    t.style.transform = 'translateY(0)';
    setTimeout(() => {
      t.style.opacity = '0';
      t.style.transform = 'translateY(10px)';
      setTimeout(() => t.remove(), 200);
    }, timeout);
  }
});
</script>
{% endblock content %}
