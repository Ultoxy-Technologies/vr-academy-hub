{% extends "website_base.html" %}
{% load static %}
{% block content %}

<style>
  /* styles.css */
:root{
  --card-radius: 12px;
  --accent: #ff7a2d; /* orange used for 'Free' */
  --muted: #6c757d;
  --card-shadow: 0 6px 18px rgba(18, 38, 63, 0.06);
  --dotted-color: rgba(0,0,0,0.08);
}

* { box-sizing: border-box; }
body {
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: #121826;
  background: #f7f9fb;
}

/* Card */
.event-card {
  border: 1px solid rgba(0,0,0,0.04);
  box-shadow: var(--card-shadow);
  overflow: hidden;
  transition: transform .18s ease, box-shadow .18s ease;
  display: flex;
  flex-direction: column;
  height: 100%;
}

/* image area with consistent aspect */
.card-media {
  overflow: hidden;
  border-bottom: 1px solid rgba(0,0,0,0.04);
  background: #f1f5f9;
}

.card-media img {
  display: block;
  width: 100%;
  height: 180px;
  object-fit: cover;
}

/* smaller screens get slightly smaller image */
@media (min-width: 992px) {
  .card-media img { height: 200px; }
}

/* Hover */
.event-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 14px 36px rgba(18,38,63,0.12);
}

/* Dotted separator like in design */
.dotted {
  border-top: 1px dashed var(--dotted-color);
  margin: 0;
}

/* Titles and meta */
.card-title {
  font-size: 1.05rem;
  line-height: 1.25;
  font-weight: 700;
  color: #07112a;
  margin-bottom: 0.5rem;
}

/* category/rating */
.category { letter-spacing: 0.2px; color: var(--muted); }

.stars i { font-size: 0.95rem; }

/* Price and button */
.price .free {
  color: var(--accent);
  font-weight: 700;
  font-size: 1rem;
}

.price .original { margin-top: 2px; }

/* Button style */
.register-btn {
  min-width: 120px;
  padding: 10px 14px;
  border-radius: 8px;
}

/* small-screen card spacing fix */
@media (max-width: 575.98px) {
  .card-media img { height: 150px; }
}

/* Status badge */
.status-badge {
  position: absolute;
  top: 12px;
  right: 12px;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 600;
  z-index: 2;
}

.status-published { background: #28a745; color: white; }
.status-draft { background: #6c757d; color: white; }
.status-cancelled { background: #dc3545; color: white; }
.status-completed { background: #17a2b8; color: white; }

/* Time display */
.time-display {
  font-size: 0.875rem;
  color: var(--muted);
}

/* Card body spacing */
.card-body {
  padding: 1.5rem;
  flex: 1;
  display: flex;
  flex-direction: column;
}
</style>

<main class="py-5 bg-light">
  <div class="container">
    <!-- Page Header -->
    <div class="text-center mb-5">
      <h1 class="display-5 fw-bold text-gray-900 mb-3">Events</h1>
      <p class="lead text-muted max-w-2xl mx-auto">
        Discover our upcoming events and workshops
      </p>
    </div>

    <div class="row g-4">
      {% for event in events %}
      <div class="col-12 col-md-6 col-lg-4 col-xl-4">
        <article class="event-card h-100 bg-white rounded-3 shadow-sm">
          <div class="card-media position-relative">
            {% if event.thumbnail %}
              <img src="{{ event.thumbnail.url }}" alt="{{ event.title }}" class="img-fluid w-100" loading="lazy">
            {% else %}
              <img src="{% static 'website/img/cource-thumbnail.png' %}" alt="Default thumbnail" class="img-fluid w-100" loading="lazy">
            {% endif %}
            
            <!-- Status Badge -->
            <div class="status-badge status-{{ event.status }}">
              {{ event.status|title }}
            </div>
          </div>

          <div class="card-body">
            <div class="meta mb-3">
              <div class="d-flex align-items-center mb-2">
                <div class="me-3 text-muted small">
                  <i class="bi bi-calendar3 me-1"></i> {{ event.event_date }}
                </div>
                <div class="text-muted small ms-auto">
                  <i class="bi bi-clock me-1"></i> {{ event.event_start_time|time:"g:i A" }}
                </div>
              </div>
              <div class="text-muted small">
                <i class="bi bi-hourglass-split me-1"></i> 
                {{ event.event_start_time|time:"g:i A" }} - {{ event.event_end_time|time:"g:i A" }} {{ event.timezone }}
              </div>
            </div>

            <hr class="my-3 dotted">

            <!-- Event Category -->
            {% if event.category %}
            <div class="category small mb-2">
              <i class="bi bi-tag me-1"></i> {{ event.category }}
            </div>
            {% endif %}

            <h5 class="card-title mb-3">{{ event.title }}</h5>

            {% if event.subtitle %}
            <p class="text-muted small mb-3">{{ event.subtitle|truncatewords:10 }}</p>
            {% endif %}

            <!-- Tags -->
            {% if event.tags %}
            <div class="mb-3">
              {% for tag in event.tags|slice:":3" %}
              <span class="badge bg-light text-dark border small me-1 mb-1">{{ tag }}</span>
              {% endfor %}
            </div>
            {% endif %}

            <div class="d-flex align-items-center justify-content-between mt-auto">
              <div class="price">
                {% if event.is_free %}
                  <div class="free text-orange fw-semibold">FREE</div>
                {% else %}
                  <div class="free text-orange fw-semibold">₹{{ event.registration_offer_fee }}</div>
                  {% if event.registration_strickthrough_fee %}
                    <div class="original text-muted small"><s>₹{{ event.registration_strickthrough_fee }}</s></div>
                  {% endif %}
                {% endif %}
              </div>

              <a href="{% url 'event_detail'  event.id %}" class="btn btn-dark register-btn" data-title="{{ event.title }}">
                Read More
              </a>
            </div>
          </div>
        </article>
      </div>
      {% empty %}
      <div class="col-12 text-center py-5">
        <div class="text-muted">
          <i class="bi bi-calendar-x display-1 d-block mb-3"></i>
          <h4 class="mb-2">No Events Available</h4>
          <p class="mb-0">Check back later for upcoming events.</p>
        </div>
      </div>
      {% endfor %}
    </div> <!-- row -->
  </div> <!-- container -->
</main>

{% endblock content %}